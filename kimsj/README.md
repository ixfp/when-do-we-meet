# 모임 날짜 투표 시스템

여러 명이 가능한 날짜를 투표하여 최적의 모임 날짜를 결정하는 웹 애플리케이션입니다.

## 파일 구조

```
gitmon-teams/
├── index.html          # 메인 HTML 파일
├── style.css           # 스타일시트
├── js/                 # JavaScript 모듈 디렉토리
│   ├── main.js         # 진입점 (초기화 및 전역 함수 설정)
│   ├── constants.js    # 상수 (공휴일 데이터)
│   ├── state.js        # 애플리케이션 상태 관리
│   ├── utils.js        # 유틸리티 함수 (날짜 포맷팅, 공휴일 확인)
│   ├── calendar.js     # 달력 UI 관련 기능
│   ├── vote.js         # 투표 추가/수정/삭제 기능
│   ├── display.js      # 결과 표시 기능
│   ├── settings.js     # 알고리즘 설정 관리
│   └── algorithm.js    # 모임 날짜 결정 알고리즘
└── README.md           # 이 파일
```

## 모듈 설명

### main.js
- **역할**: 애플리케이션 진입점
- **기능**:
  - 모든 모듈 import
  - 전역 함수 노출 (HTML onclick에서 사용)
  - 페이지 로드 시 초기화

### constants.js
- **역할**: 애플리케이션 상수 관리
- **기능**:
  - 공휴일 데이터 (2025-2027년)
- **Export**: `HOLIDAYS`

### state.js
- **역할**: 애플리케이션 상태 관리
- **기능**:
  - 투표 데이터, 참가자 목록, 선택된 날짜 등 상태 관리
  - 상태 업데이트 헬퍼 함수 제공
- **Export**:
  - `state` (전역 상태 객체)
  - 상태 업데이트 함수들

### utils.js
- **역할**: 유틸리티 함수 제공
- **기능**:
  - 날짜 포맷팅 (`formatDate`)
  - 공휴일 확인 (`isHoliday`, `getHolidayName`)
- **Export**: `formatDate`, `isHoliday`, `getHolidayName`

### calendar.js
- **역할**: 달력 UI 관련 기능
- **기능**:
  - 달력 생성 및 렌더링
  - 월 변경
  - 날짜 선택/해제
  - 선택된 날짜 표시 업데이트
- **Export**: `generateCalendar`, `changeMonth`, `toggleDateSelection`, `updateSelectedDatesDisplay`

### vote.js
- **역할**: 투표 관련 기능
- **기능**:
  - 투표 추가
  - 투표 수정
  - 투표 삭제
  - 수정 취소
- **Export**: `addVote`, `editVote`, `deleteVote`, `cancelEdit`

### display.js
- **역할**: 결과 표시 기능
- **기능**:
  - 알고리즘 기반 최종 모임 날짜 표시
  - 투표 결과 표시 (투표 수, 최종 날짜 강조)
  - 참가자 목록 및 참석 통계 표시
  - 알고리즘 경고 메시지 표시
- **Export**: `updateResults`, `updateParticipantsList`

### settings.js
- **역할**: 알고리즘 설정 관리
- **기능**:
  - 설정 저장/불러오기 (로컬 스토리지)
  - 설정 UI 관리
  - 투표 검증 함수
- **Export**: `settings`, `toggleSettingsPanel`, `saveSettings`, `resetSettings`, `loadSettingsFromLocalStorage`

### algorithm.js
- **역할**: 모임 날짜 결정 알고리즘
- **기능**:
  - 설정 기반 최종 모임 날짜 결정
  - 최소 참석 인원 필터링
  - 인당 최소 참석 모임 횟수 검증
  - 참가자별/날짜별 통계 계산
- **Export**: `determineFinalMeetingDates`, `calculateStatistics`

## 주요 기능

### 1. 달력에서 날짜 선택
- 월별 달력 UI
- 다중 날짜 선택 가능
- 공휴일 표시 (빨간색 배경)
- 주말 표시 (일요일: 빨간색, 토요일: 파란색)
- 과거 날짜 비활성화

### 2. 투표하기
- 이름 입력
- 가능한 날짜 선택
- 투표 제출

### 3. 투표 관리
- 투표 수정
- 투표 삭제

### 4. 알고리즘 설정 (커스터마이징)
- **인당 최소 선택 날짜 수**: 각 참가자가 최소한 선택해야 하는 날짜 수
- **최소 모임 횟수**: 최종적으로 정해질 모임 날짜의 최소 개수
- **인당 최소 참석 모임 횟수**: 각 참가자가 최소한 참석해야 하는 모임 횟수
- **모임당 최소 참석 인원**: 한 모임 날짜에 최소한 참석해야 하는 인원 수
- 설정은 로컬 스토리지에 자동 저장

### 5. 결과 확인
- 알고리즘 기반 최종 모임 날짜 자동 결정
- 참가자별 참석 통계 (참석 횟수, 비율)
- 날짜별 투표 수 막대 그래프
- 최종 날짜 강조 표시
- 알고리즘 경고 메시지 (조건 미충족 시)

## 기술 스택

- **HTML5**: 마크업
- **CSS3**: 스타일링 (Flexbox, Grid)
- **JavaScript (ES6 Modules)**: 로직 구현
  - ES6 import/export
  - 모듈 시스템
  - 상태 관리

## 사용 방법

### 기본 사용법
1. 브라우저에서 `index.html` 열기
2. (선택) "⚙️ 알고리즘 설정" 클릭하여 모임 조건 설정
3. 이름 입력
4. 달력에서 가능한 날짜 선택
5. "투표하기" 클릭
6. 여러 명이 투표하면 자동으로 알고리즘이 최종 모임 날짜 결정

### 알고리즘 설정 예시

**예시 1: 정기 모임 (월 2회)**
- 인당 최소 선택 날짜 수: 5개
- 최소 모임 횟수: 2회
- 인당 최소 참석 모임 횟수: 1회
- 모임당 최소 참석 인원: 3명

**예시 2: 스터디 그룹 (주 1회, 전원 참석)**
- 인당 최소 선택 날짜 수: 3개
- 최소 모임 횟수: 4회 (한 달)
- 인당 최소 참석 모임 횟수: 4회
- 모임당 최소 참석 인원: 전체 참가자 수

**예시 3: 유연한 모임**
- 인당 최소 선택 날짜 수: 1개
- 최소 모임 횟수: 1회
- 인당 최소 참석 모임 횟수: 0회 (제한 없음)
- 모임당 최소 참석 인원: 2명

## 유지보수 가이드

### 새로운 기능 추가
1. 해당 기능이 속하는 모듈 파일 수정
2. 필요시 새 모듈 파일 생성
3. `main.js`에서 필요한 함수를 import 및 전역 노출

### 공휴일 데이터 업데이트
- `js/constants.js` 파일의 `HOLIDAYS` 객체 수정

### 상태 구조 변경
- `js/state.js` 파일 수정
- 관련 모듈에서 상태 접근 방식 업데이트

### 알고리즘 커스터마이징
1. **새 설정 항목 추가**
   - `js/settings.js`의 `defaultSettings`에 항목 추가
   - HTML에 입력 필드 추가
   - `updateSettingsUI()`와 `saveSettings()` 함수 업데이트

2. **알고리즘 로직 수정**
   - `js/algorithm.js`의 `determineFinalMeetingDates()` 함수 수정
   - 새 필터링 조건 추가 또는 기존 로직 변경

3. **검증 로직 추가**
   - `js/vote.js`에 투표 시 검증 추가
   - `js/settings.js`에 설정 유효성 검증 추가

## 모듈 간 의존성

```
main.js
├── calendar.js
│   ├── state.js
│   └── utils.js
│       └── constants.js
├── vote.js
│   ├── state.js
│   ├── settings.js
│   ├── calendar.js
│   └── display.js
│       ├── state.js
│       └── algorithm.js
│           └── settings.js
├── settings.js
└── display.js (위 참조)
```

## 알고리즘 설명

### 최종 모임 날짜 결정 프로세스

1. **1단계: 필터링**
   - 최소 참석 인원 조건을 만족하는 날짜만 선택

2. **2단계: 초기 선택**
   - 투표 수가 높은 순으로 필요한 모임 횟수만큼 날짜 선택

3. **3단계: 검증 및 조정**
   - 각 참가자의 최소 참석 횟수 검증
   - 조건을 만족하지 못하면 추가 날짜 선택 시도

4. **4단계: 통계 계산**
   - 참가자별 참석 횟수 및 비율 계산
   - 날짜별 참석 인원 계산

### 경고 메시지

알고리즘이 설정 조건을 만족하지 못하는 경우 경고 메시지 표시:
- 최소 참석 인원 미달
- 필요한 모임 횟수 부족
- 참가자별 최소 참석 횟수 미달
